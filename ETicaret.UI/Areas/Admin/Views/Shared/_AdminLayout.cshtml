@using System.Security.Claims
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Bubbly - Boootstrap 5 Admin template by Bootstrapious.com</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex">
    <!-- Google fonts - Popppins for copy-->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="../../css2?family=Poppins:wght@300;400;500;700&amp;display=swap" rel="stylesheet">
    <!-- Prism Syntax Highlighting-->
    <link rel="stylesheet" href="https://d19m59y37dris4.cloudfront.net/bubbly/1-3-2/vendor/prismjs/plugins/toolbar/prism-toolbar.css">
    <link rel="stylesheet" href="https://d19m59y37dris4.cloudfront.net/bubbly/1-3-2/vendor/prismjs/themes/prism-okaidia.css">
    <!-- The Main Theme stylesheet (Contains also Bootstrap CSS)-->
    <link rel="stylesheet" href="https://d19m59y37dris4.cloudfront.net/bubbly/1-3-2/css/style.default.63c85ff9.css" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="https://d19m59y37dris4.cloudfront.net/bubbly/1-3-2/css/custom.0a822280.css">
    <!-- Favicon-->
    <link rel="shortcut icon" href="https://d19m59y37dris4.cloudfront.net/bubbly/1-3-2/img/favicon.png">
    <style>
        .flag {
            cursor: pointer;
            width: 30px;
            height: 20px;
            margin: 0 5px;
        }
    </style>
</head>
<body>
    <!-- navbar-->
    <header class="header">
        <nav class="navbar navbar-expand-lg px-4 py-2 bg-white shadow">
            <a class="sidebar-toggler text-gray-500 me-4 me-lg-5 lead" href="#"><i class="fas fa-align-left"></i></a><a class="navbar-brand fw-bold text-uppercase text-base" asp-controller="Home" asp-action="Index"><span class="d-none d-brand-partial">E-Commerce </span><span class="d-none d-sm-inline">Dashboard</span></a>
            <ul class="ms-auto d-flex align-items-center list-unstyled mb-1">
                <div class="row justify-content-center mt-4">
                    <div class="col-lg-3 offset-lg-1 text-center ms-2">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/b/b4/Flag_of_Turkey.svg" class="flag" id="flag-tr" alt="Türkçe">
                    </div>
                    <div class="col-lg-3 offset-lg-1 text-center ms-2">
                        <img src="https://upload.wikimedia.org/wikipedia/en/a/ae/Flag_of_the_United_Kingdom.svg" class="flag" id="flag-en" alt="English">
                    </div>
                </div>
            </ul>
            <li class="nav-item dropdown pe-3">
                <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
                    <span class="d-none d-md-block dropdown-toggle ps-2"> <strong>@User.Claims.FirstOrDefault(c => c.Type == ClaimTypes.Role)?.Value</strong> </span>
                </a><!-- End Profile Image Icon -->
                <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile">
                    <li class="dropdown-header">
                        @await Component.InvokeAsync("AdminProfile")
                    </li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li>
                        <a class="dropdown-item d-flex align-items-center" href="javascript:void(0);" id="openProfileModal">
                            <i class="bi bi-person"></i>
                            <span>@Localizer["My Profile"]</span>
                        </a>
                    </li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li>
                        <a class="dropdown-item d-flex align-items-center" href="javascript:void(0);" id="openChangePasswordModal">
                            <i class="bi bi-gear"></i>
                            <span>@Localizer["Change Password"]</span>
                        </a>
                    </li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li>
                        <a class="dropdown-item d-flex align-items-center" asp-area="Admin" asp-controller="Account" asp-action="Logout">
                            <i class="bi bi-box-arrow-right"></i>
                            <span>@Localizer["Logout"]</span>
                        </a>
                    </li>
                </ul><!-- End Profile Dropdown Items -->
            </li>
        </nav>
    </header>
    <div class="d-flex align-items-stretch">
        <div class="sidebar py-3" id="sidebar">
            <h6 class="sidebar-heading">Main</h6>
            <ul class="list-unstyled">
                <li class="sidebar-list-item">
                    <a class="sidebar-link text-muted " href="#" data-bs-target="#cmsDropdown" role="button" aria-expanded="false" data-bs-toggle="collapse">
                        <svg class="svg-icon svg-icon-md me-3">
                            <use xlink:href="icons/orion-svg-sprite.71e9f5f2.svg#reading-1"> </use>
                        </svg><span class="sidebar-link-title">@Localizer["Content Management"] </span>
                    </a>
                    <ul class="sidebar-menu list-unstyled collapse " id="cmsDropdown">
                        <li class="sidebar-list-item">
                            <a class="sidebar-link text-muted" asp-controller="Product" asp-action="Index">
                                @Localizer["Product"]
                            </a>
                        </li>
                        <li class="sidebar-list-item">
                            <a class="sidebar-link text-muted" asp-controller="SizeType" asp-action="Index">
                                @Localizer["Size Type"]
                            </a>
                        </li>
                        <li class="sidebar-list-item">
                            <a class="sidebar-link text-muted" asp-controller="Size" asp-action="Index">
                                @Localizer["Size"]
                            </a>
                        </li>
                        <li class="sidebar-list-item">
                            <a class="sidebar-link text-muted" asp-controller="Category" asp-action="Index">
                                @Localizer["Category"]
                            </a>
                        </li>
                        <li class="sidebar-list-item">
                            <a class="sidebar-link text-muted" asp-controller="Campaign" asp-action="Index">
                                @Localizer["Campaign"]
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="sidebar-list-item">
                    <a class="sidebar-link text-muted " href="#" data-bs-target="#userDropdown" role="button" aria-expanded="false" data-bs-toggle="collapse">
                        <svg class="svg-icon svg-icon-md me-3">
                            <use xlink:href="icons/orion-svg-sprite.71e9f5f2.svg#man-1"> </use>
                        </svg><span class="sidebar-link-title">@Localizer["User"] </span>
                    </a>
                    <ul class="sidebar-menu list-unstyled collapse " id="userDropdown">
                        <li class="sidebar-list-item">
                            <a class="sidebar-link text-muted" asp-controller="Admin" asp-action="Index">
                                @Localizer["Admin"]
                            </a>
                            <a class="sidebar-link text-muted" asp-controller="Customer" asp-action="Index">
                                @Localizer["Customer"]
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
        <!-- Modal -->
        <div class="modal fade" id="profileModal" tabindex="-1" aria-labelledby="profileModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="profileModalLabel">Profil</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" id="profileModalBody">
                        <!-- Profil içeriği buraya yüklenecek -->
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Kapat</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Scripts -->
        <script>
            document.getElementById("openProfileModal").addEventListener("click", function () {
                fetch('@Url.Action("Profile", "Account", new { area = "Admin" })')
                    .then(response => response.text())
                    .then(html => {
                        document.getElementById("profileModalBody").innerHTML = html;
                        var modalElement = new bootstrap.Modal(document.getElementById("profileModal"));
                        modalElement.show();
                    })
                    .catch(error => console.error('Error loading profile:', error));
            });

            document.getElementById("openChangePasswordModal").addEventListener("click", function () {
                fetch('@Url.Action("ChangePassword", "Account", new { area = "Admin" })')
                    .then(response => response.text())
                    .then(html => {
                        document.getElementById("profileModalBody").innerHTML = html;
                        var modalElement = new bootstrap.Modal(document.getElementById("profileModal"));
                        modalElement.show();
                    })
                    .catch(error => console.error('Error loading change password form:', error));
            });
        </script>
        <!-- Gerekli CSS ve JS dosyalarını ekleyin -->
        @section Styles {
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
            <link rel="stylesheet" href="~/css/site.css">
        }
        @section Scripts {
            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.8/umd/popper.min.js"></script>
            <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/js/bootstrap.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>
        }
        <div class="page-holder bg-gray-100">
            <div class="container-fluid px-lg-4 px-xl-5">
                @RenderBody()
            </div>
            <footer class="footer bg-white shadow align-self-end py-3 px-xl-5 w-100">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-6 text-center text-md-start fw-bold">
                            <p class="mb-2 mb-md-0 fw-bold">Bilge Adam E-Commerce &copy; 2024</p>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>
    <!-- JavaScript files-->
    <script src="~/admin/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="~/../../npm/js-cookie%402/src/js.cookie.min.js"></script>
    <!-- Data Tables-->
    <script src="~/admin/vendor/simple-datatables/umd/simple-datatables.js"></script>
    <!-- Chart.js-->
    <script src="~/admin/js/vendor/chart.js/Chart.min.js"></script>
    <script src="~/admin/js/charts-defaults.8a5fcd99.js"> </script>
    <!-- E-commerce dashboard-->
    <script src="~/admin/js/index-e-commerce.7e2fc558.js"> </script>
    <!-- Main Theme JS File-->
    <script src="~/admin/js/theme.87f0a411.js"></script>
    <!-- Prism for syntax highlighting-->
    <script src="~/admin/vendor/prismjs/prism.js"></script>
    <script src="~/admin/vendor/prismjs/plugins/normalize-whitespace/prism-normalize-whitespace.min.js"></script>
    <script src="~/admin/vendor/prismjs/plugins/toolbar/prism-toolbar.min.js"></script>
    <script src="~/admin/vendor/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
    <script type="text/javascript">
        //Optinal
        Prism.plugins.NormalizeWhitespace.setDefaults({
            'remove-trailing': true,
            'remove-indent': true,
            'left-trim': true,
            'right-trim': true,
        });
        // Dil değişimi için bayraklara tıklama olayı
        document.getElementById('flag-tr').addEventListener('click', function () {
            setLanguage('tr');
        });
        document.getElementById('flag-en').addEventListener('click', function () {
            setLanguage('en');
        });
        function setLanguage(culture) {
            document.cookie = ".AspNetCore.Culture=c=" + culture + "|uic=" + culture + ";path=/";
            location.reload();
        }
    </script>
    @await RenderSectionAsync("Scripts", required: false)
    @await Component.InvokeAsync("Notyf");
    <!-- FontAwesome CSS - loading as last, so it doesn't block rendering-->
    <link rel="stylesheet" href="../../releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
</body>
</html>
